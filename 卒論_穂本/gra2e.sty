%%% 校内提出レポート用スタイルファイル gakui.sty

%%%
%%% margin set
%%%
\oddsidemargin  -0.25cm		% 奇数番号ページの左マージン
\evensidemargin -0.25cm		% 偶数番号ページの左マージン
\topmargin -1.25cm			% ページの上端と本文の間隔
%\textwidth 38zw			% 本文の横幅
\textwidth 45zw			% 本文の横幅
\parindent 0cm			% 改行後の先頭文字の空白
%\mathindent 1.6zw		% 数式の左からの間隔

%%%
%%% section-title-font set
%%%
\def\section{
  \@startsection{section}{1}{\z@}
  {3.25ex plus1ex minus.2ex}{10ex plus .2ex}{\LARGE\bf}}
\def\subsection{
  \@startsection{subsection}{2}{\z@}
  {3.25ex plus1ex minus.2ex}{1.5ex plus .2ex}{\Large\bf}}
\def\subsubsection{
  \@startsection{subsubsection}{2}{\z@}
  {3.25ex plus1ex minus.2ex}{1.5ex plus .2ex}{\large\bf}}

%%%
%%% bibliography-title-font set
%%%
\def\thebibliography#1{
%  \section*{\begin{center}参考文献\end{center}
%  \markboth{参 考 文 献}{参 考 文 献}}
  \vskip0.5\baselineskip\small\list
    {\arabic{enumi})}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
 \advance\leftmargin\labelsep
 \usecounter{enumi}}
  {\settowidth\labelwidth{[#1]}
  \leftmargin=\labelwidth
  \advance\leftmargin\labelsep
  \usecounter{enumi}}
  \def\newblock{\hskip .11em plus .33em minus .07em}
  \sloppy
  \sfcode`\.=1000\relax 
  \small
  }

%%%%%%%%%%%%%%%
\input{cite.sty}	% cite.sty

\renewcommand\citeform[1]{#1)} % parenthesized numbers [(1)-(5)]
\def\@cite#1#2{$^{\mbox{\scriptsize{#1\if@tempswa , #2\fi}}}$}
%%%%%%%%%%%%%%%

\let\endthebibliography=\endlist

%%%
%%% headline style set
%%%
\def\headline#1{
  \section*{\hskip-.5em 【#1】}
  \setcounter{section}{0}}

%%%
%%% page-style set
%%%
\mark{{}{}}
\def\ps@plain{
  \def\@oddhead{}
  \def\@evenhead{}
  \def\@oddfoot{\hbox{}\hfil{\rm ---\ \thepage\ ---}\hfil}
  \def\@evenfoot{\hbox{}\hfil{\rm ---\ \thepage\ ---}\hfil}
  \def\sectionmark##1{}
  \def\subsectionmark##1{}}
\ps@plain
  \pagenumbering{arabic}
  \onecolumn
  \if@twoside
  \else
    \raggedbottom
  \fi

%%%
%%% initialize for use
%%%
\sloppy
\flushbottom
\pagestyle{plain}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%% 数式の設定 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ディスプレイスタイルの分数
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newcommand{\dfrac}[2]{\displaystyle{\frac{#1}{#2}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ボールドイタリックにするコマンド
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\bm}[1]{\mbox{\boldmath \it $#1$}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 枠有りリターンキー
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\returna}{\raisebox{-2pt}{
	\setlength{\unitlength}{1pt}
	\thinlines
	\begin{picture}(8,8)
		\put(5,3){\line(0,1){5}}
		\put(5,3){\vector(-1,0){7}}
		\put(-4,2){\line(0,1){6}}
		\put(7,2){\line(0,1){6}}
		\put(1.5,8){\oval(11,4)[t]}
		\put(1.5,2){\oval(11,4)[b]}
	\end{picture}
	}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 枠なしリターンキー
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\returnb}{\raisebox{-2pt}{
	\setlength{\unitlength}{1pt}
	\thinlines
	\begin{picture}(8,8)
		\put(5,3){\line(0,1){5}}
		\put(5,3){\vector(-1,0){7}}
	\end{picture}
	}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% ○で囲んだ数字
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\maru}[1]{{\ooalign{\hfill#1\/\hfill\crcr
	\raise.167ex\hbox{\mathhexbox20D}}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%equarray 微修正（）
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% \def\eqnarray{\stepcounter{equation}
%  \parsep \z@ plus \z@ minus \z@ 
% % \topsep 4pt plus 2pt minus 1pt 
%  \topsep 8pt plus 2pt minus 1pt 
%  \itemsep \z@ plus \z@ minus \z@
% \let\@currentlabel=\theequation
% \global\@eqnswtrue
% \global\@eqcnt\z@\tabskip\mathindent\let\\=\@eqncr
% \abovedisplayskip\topsep\ifvmode\advance\abovedisplayskip\partopsep\fi
% \belowdisplayskip\abovedisplayskip
% \belowdisplayshortskip\abovedisplayskip
% \abovedisplayshortskip\abovedisplayskip
% $$\halign to
% \linewidth\bgroup\@eqnsel\hskip\@centering$\displaystyle\tabskip\z@
%  {##}$&\global\@eqcnt\@ne \hskip .8\arraycolsep \hfil${##}$\hfil%% default 2\arraycolsep
%  &\global\@eqcnt\tw@ \hskip .8\arraycolsep $\displaystyle{##}$\hfil 
%  \tabskip\@centering&\llap{##}\tabskip\z@\cr}
% \def\endeqnarray{\@@eqncr\egroup
%  \global\advance\c@equation\m@ne$$\global\@ignoretrue }
% \newdimen\mathindent 
% \mathindent = 2zw

\def\eqnarray{%%
 \stepcounter{equation}%%
 \let\@currentlabel=\theequation
 \global\@eqnswtrue
 \global\@eqcnt\z@
 \tabskip\@centering
 \let\\=\@eqncr
 $$\halign to \displaywidth\bgroup\@eqnsel\hskip\@centering
 $\displaystyle\tabskip\z@{##}$&\global\@eqcnt\@ne 
 %%\hskip 2\arraycolsep 
 \hfil$\displaystyle{{}##{}}$\hfil
 &\global\@eqcnt\tw@ $\displaystyle\tabskip\z@{##}$\hfil 
 \tabskip\@centering&\llap{##}\tabskip\z@\cr}
 
 
 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 図・表 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \def\fnum@figure{\small{\bf 図\ \thefigure}\ \,}
 \def\fnum@table{\small{\bf 表\ \thetable}\ \,}

 \long\def\@makecaption#1#2{
   \vskip 0pt % abovecaptionskip
   \setbox\@tempboxa\hbox{#1 #2}
   \ifdim \wd\@tempboxa >\hsize 
     \begin{list}{}{\labelwidth 0pt \leftmargin 1.75cm \itemindent -0.75cm
               \rightmargin 0.25cm}
       \item[\small#1] \small#2
     \end{list}
   \else \hbox
     to\hsize{\hfil\box\@tempboxa\hfil} 
     \vskip 4pt  % belowcaptionskip
   \fi}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%list環境の微小修正
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\leftmargini   3zw%%   25pt
\leftmarginii  2zw%%   22pt 
\leftmarginiii 2zw%%   18.7pt 
\leftmarginiv  2zw%%   17pt 
\leftmarginv   1zw%%   10pt
\leftmarginvi  1zw%    10pt
\leftmargin=\leftmargini
\labelwidth=\leftmargini\advance\labelwidth-\labelsep
\labelsep      1zw%%    5pt

\def\@listI{%%
\leftmargin\leftmargini 
\parsep \z@%%                      4pt plus 2pt minus 1pt
\topsep 6pt plus 2pt minus 2pt%%   8pt plus 2pt minus 4pt
\itemsep 0pt plus 2pt \relax}%%    4pt plus 2pt minus 1pt
\let\@listi=\@listI
\@listi 

\def\@listii{%%
\leftmargin\leftmarginii
 \labelwidth\leftmarginii\advance\labelwidth-\labelsep
 \topsep 2pt plus 1pt minus 1pt%%  4pt plus 2pt minus 1pt
 \parsep \z@%%                     2pt plus 1pt minus 1pt
 \itemsep =0pt plus 1pt\relax}

%%display数式のペナルティ変更%%%%%%%%%%%
\global\postdisplaypenalty 0%10000
%%display数式がぺージトップへ来ることを認可。デフォルトでは厳禁（10000）
\global\predisplaypenalty 0%10000
%%display数式がページボトムへ来ることを認可（デフォルト）

\def\baselinestretch{1.15}

%%行数で指定する場合は、希望行数−１を係数とする。
%%31行の場合は　30\baselineskip　とする
%%この場合は当然、行送りによって天地寸法は変動。
\baselineskip =\baselinestretch\baselineskip
\textheight=37\baselineskip \advance \textheight by \topskip%%
 \advance \textheight by 1pt%%1ptの余裕を持たせる
%%


\newtheorem{problem}{問題}
  \renewcommand{\endproblem}{\hfill■\endtrivlist}

\newtheorem{example}{例}
  \renewcommand{\endexample}{\hfill■\endtrivlist}

\newtheorem{theorem}{定理}
  \renewcommand{\endtheorem}{\hfill□\endtrivlist}

\newtheorem{definition}{定義}
  \renewcommand{\enddefinition}{\hfill■\endtrivlist}

\newtheorem{lemma}{補題}
  \renewcommand{\endlemma}{\hfill□\endtrivlist}
  
\newtheorem{program}{\bf リスト}
  \renewcommand{\endprogram}{}


\def\@begintheorem#1#2{\trivlist \vspace{-0.2zw}\item[%
		\hskip \labelsep\hspace{0zw}{\raisebox{0zh}[0pt][0pt]{\colorbox{lightgray}{\textcolor{black}{\sf #1~#2}}}}%
		]}
\def\@opargbegintheorem#1#2#3{\trivlist \vspace{-0.2zw}\item[%
		\hskip \labelsep\hspace{0zw}{\raisebox{0zh}[0pt][0pt]{\colorbox{lightgray}{\textcolor{black}{\sf #1~#2\ (#3)}}}}%
		]}

%---------------------------------------------------------------------
%
%	目次
%

\def\tableofcontents{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
 \fi\section*{目 次\@mkboth{目 次}{目 次}}
 \@starttoc{toc}\if@restonecol\twocolumn\fi}
\def\l@part#1#2{\addpenalty{-\@highpenalty}
 \addvspace{2.25em plus 1pt} \begingroup
 \@tempdima 3em \parindent \z@ \rightskip \@pnumwidth \parfillskip
-\@pnumwidth 
 {\large \bf \leavevmode #1\hfil \hbox to\@pnumwidth{\hss #2}}\par
 \nobreak \endgroup}

\def\l@section{\@dottedtocline{1}{0.em}{4.3em}}
\def\l@subsection{\@dottedtocline{2}{2.8em}{2.3em}}
\def\l@subsubsection{\@dottedtocline{3}{3.8em}{3.2em}}


%--------------------------------------------------------------------
%
%	章建て
%
 \def\thesection {\@chapappl \arabic{section} \@chapappr}
 \def\thepart {\arabic{section}}
 \def\thesubsection {\thepart.\arabic{subsection}}
 \def\thesubsubsection {\thesubsection .\arabic{subsubsection}}
 \def\theparagraph {\thesubsubsection.\arabic{paragraph}}
 \def\thesubparagraph {\theparagraph.\arabic{subparagraph}}
 \def\@chapappl{第~}
 \def\@chapappr{章}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 章ごとに numbering
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

     \renewcommand{\theequation}{%
          \thepart.\arabic{equation}}
     \@addtoreset{equation}{section}

     \renewcommand{\thetable}{%
          \thepart.\arabic{table}}
     \@addtoreset{table}{section}

     \renewcommand{\thefigure}{%
          \thepart.\arabic{figure}}
     \@addtoreset{figure}{section}

     \renewcommand{\theproblem}{%
          \thepart.\arabic{problem}}
     \@addtoreset{problem}{section}

     \renewcommand{\theexample}{%
          \thepart.\arabic{example}}
     \@addtoreset{example}{section}

     \renewcommand{\thetheorem}{%
          \thepart.\arabic{theorem}}
     \@addtoreset{theorem}{section}

     \renewcommand{\thedefinition}{%
          \thepart.\arabic{definition}}
     \@addtoreset{definition}{section}

     \renewcommand{\thelemma}{%
          \thepart.\arabic{lemma}}
     \@addtoreset{lemma}{section}
     
     \renewcommand{\theprogram}{%
          \thepart.\arabic{program}}
     \@addtoreset{program}{section}
     

